# 1. ë¦¬ì•¡íŠ¸ í›…ê³¼ ë§ˆì´í¬ë¡œ ìƒíƒœ ê´€ë¦¬

## ë§ˆì´í¬ë¡œ ìƒíƒœ ê´€ë¦¬ ì´í•´í•˜ê¸°

- ëª©ì  ì§€í–¥ì , íŠ¹ì • ì½”ë”© íŒ¨í„´ê³¼ í•¨ê»˜ ì‚¬ìš©
- íŠ¹ì • ëª©ì ì— ë”°ë¥¸ í•´ê²°ì±… ì œê³µ
- ê¸°ë³¸ì ì¸ ìƒíƒœ ê´€ë¦¬ ê¸°ëŠ¥ í¬í•¨
- ë¦¬ì•¡íŠ¸ ìƒíƒœ: UIë¥¼ ë‚˜íƒ€ë‚´ëŠ” ëª¨ë“  ë°ì´í„°
- ë°°ìš°ê¸° ì‰¬ì›Œì•¼í•¨

## ë¦¬ì•¡íŠ¸ í›… ì‚¬ìš©í•˜ê¸°

- useState
- useReducer
- useEffect
- ì¥ì :
- UI ì»´í¬ë„ŒíŠ¸ì—ì„œ ë¡œì§ ì¶”ì¶œ ê°€ëŠ¥
- ì‚¬ìš©ì ì •ì˜ í›… (ì˜ˆ: useCount) ìƒì„± ê°€ëŠ¥

ì‚¬ìš©ì ì •ì˜ í›… ì´ì :

1. ì½”ë“œ ê°€ë…ì„± í–¥ìƒ
2. ì»´í¬ë„ŒíŠ¸ì™€ ë¡œì§ ë¶„ë¦¬
3. ìƒˆë¡œìš´ ê·œì¹™ ì¶”ê°€ ìš©ì´

> ğŸ’¡ì‚¬ìš©ì ì •ì˜ í›…
> https://www.npmjs.com/search?q=react%20hooks > https://github.com/search/?q=reacthooks&type=repositories

### ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸°ë¥¼ ìœ„í•œ ì„œìŠ¤íœìŠ¤ì™€ ë™ì‹œì„± ë Œë”ë§

ì„œìŠ¤íœìŠ¤ : ë¹„ë™ê¸° ì²˜ë¦¬(async)ì— ëŒ€í•œ ê±±ì • ì—†ì´ ì»´í¬ë„ŒíŠ¸ë¥¼ ì½”ë”©í• ìˆ˜ ìˆëŠ”ë°©ë²•
ë™ì‹œì„± ë Œë”ë§ : ë Œë”ë§ í”„ë¡œì„¸ìŠ¤ë¥¼ ì²­í¬(chunk)ë¼ëŠ” ë‹¨ìœ„ë¡œ ë¶„í• í•´ì„œ ì¤‘ì•™ ì²˜ë¦¬ ì¥ì¹˜ (CPU)ê°€ ì¥ì‹œê°„ ì°¨ë‹¨ë˜ëŠ”ê²ƒì„ ë°©ì§€í•˜ëŠ” ë°©ë²•

ì£¼ì˜ì‚¬í•­:

- state, ref ê°ì²´ ì§ì ‘ ë³€ê²½ ê¸ˆì§€ (Why? ë¦¬ë Œë”ë§ì‹œ ì˜ˆê¸°ì¹˜ ì•Šì€ ë™ì‘ì´ ë°œìƒí•  ìˆ˜ ìˆë‹¤.)
- í›…ê³¼ ì»´í¬ë„ŒíŠ¸ í•¨ìˆ˜ëŠ” ìˆœìˆ˜í•´ì•¼ í•¨ (Why? ì—¬ëŸ¬ ë²ˆ í˜¸ì¶œë  ìˆ˜ ìˆê¸° ë•Œë¬¸)

> ğŸ’¡React 18ì—ì„œëŠ”?
> https://github.com/reactwg/react-18/discussions/4

React 18 ì†Œê°œ
`startTransition`:

- ë¹„ìš©ì´ ë§ì´ ë“œëŠ” ìƒíƒœ ì „í™˜ ë™ì•ˆ UIì˜ ë°˜ì‘ì„±ì„ ìœ ì§€í•  ìˆ˜ ìˆê²Œ í•´ì¤ë‹ˆë‹¤.
- ì˜ˆë¥¼ ë“¤ì–´, í° ë°ì´í„° ì„¸íŠ¸ë¥¼ ë Œë”ë§í•˜ëŠ” ë™ì•ˆ ì‚¬ìš©ì ì…ë ¥ì— ì¦‰ì‹œ ë°˜ì‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
  `useDeferredValue`:
- í™”ë©´ì˜ ëœ ì¤‘ìš”í•œ ë¶€ë¶„ì˜ ì—…ë°ì´íŠ¸ë¥¼ ì§€ì—°ì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ì¤‘ìš”í•œ ì½˜í…ì¸ ë¥¼ ë¨¼ì € ì—…ë°ì´íŠ¸í•˜ê³ , ëœ ì¤‘ìš”í•œ ë¶€ë¶„ì€ ë‚˜ì¤‘ì— ì—…ë°ì´íŠ¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
  Streaming SSR with selective hydration
- í˜ì´ì§€ì˜ ì¼ë¶€ë¶„ì”© ì ì§„ì ìœ¼ë¡œ ë¡œë“œí•˜ê³  hydrate(JavaScript ì´ë²¤íŠ¸ ì—°ê²°)í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## ì „ì—­ ìƒíƒœ íƒêµ¬í•˜ê¸°

êµ¬í˜„ ì–´ë ¤ì›€ (Why? ì»´í¬ë„ŒíŠ¸ ëª¨ë¸ ë•Œë¬¸)
ì»´í¬ë„ŒíŠ¸: ê²©ë¦¬ ë° ì¬ì‚¬ìš© í•„ìš”í•˜ê¸° ë•Œë¬¸ì— ì „ì—­ ìƒíƒœì— ì˜ì¡´í•˜ì§€ ì•ŠëŠ” ê²ƒì´ ì¢‹ë‹¤.

ë¦¬ì•¡íŠ¸ì—ì„œ ì „ì—­ ìƒíƒœë¥¼ êµ¬í˜„í•˜ëŠ” ê²ƒì€ ê°„ë‹¨í•œ ì‘ì—…ì´ ì•„ë‹ˆë‹¤. ê·¸ ì´ìœ ëŠ” ë¦¬ì•¡íŠ¸ê°€ ì»´í¬ë„ŒíŠ¸ ëª¨ë¸ì— ê¸°ë°˜í•˜ê¸°ë•Œë¬¸ì´ë‹¤. ì»´í¬ë„ŒíŠ¸ ëª¨ë¸ì—ì„œëŠ” ì§€ì—­ì„±(locality)ì´ ì¤‘ìš”í•˜ë©°, ì´ëŠ” ì»´í¬ë„ŒíŠ¸ê°€ ì„œë¡œ ê²©ë¦¬ë¼ì•¼í•˜ê³  ì¬ì‚¬ìš©ì´ê°€ëŠ¥í•´ì•¼í•œë‹¤ëŠ”ê²ƒì„ì˜ë¯¸í•œë‹¤

## useState ì‚¬ìš©í•˜ê¸°

### ê°’ìœ¼ë¡œ ìƒíƒœ ê°±ì‹ í•˜ê¸°

> ğŸ’¡ë² ì¼ì•„ì›ƒ(bailout) : ë¦¬ë Œë”ë§ì„ ë°œìƒì‹œí‚¤ì§€ ì•ŠëŠ” ê²ƒì„ ì˜ë¯¸

- ë™ì¼ ê°’: ë² ì¼ì•„ì›ƒìœ¼ë¡œ ë¦¬ë Œë”ë§ ë°©ì§€
- ê°ì²´: ì–•ì€ ë¹„êµ ìˆ˜í–‰

```tsx
const Component = 0 => {
const [count, setCountj = useState(0);

return (
<div>
{count}
<button onCtick={() => setCount(count + 1))>
Set Count to {count + 1} </button>
</div>
```

ë²„íŠ¼ì„ë‘ ë²ˆ ë¹ ë¥´ê²Œí´ë¦­í•´ë„í•œ ë²ˆë§Œì¦ê°€

### í•¨ìˆ˜ë¡œ ìƒíƒœ ê°±ì‹ í•˜ê¸°

- ì´ì „ ìƒíƒœ ê¸°ë°˜ ìƒˆ ìƒíƒœ ê³„ì‚° ê°€ëŠ¥

```tsx
// í´ë¦­ íšŸìˆ˜ ì„¸ëŠ” ì˜ë¯¸ì—ì„œëŠ” ë³´í†µ ì´ë ‡ê²Œ í•¨ìˆ˜ ìƒíƒœë¡œ ì‚¬ìš©
<button onClick={() => setCount((c) => c + 1)}>

Increment Count </button>


// ë² ì¼ ì•„ì›ƒì„ ì¡°ì •í•  ìˆ˜ ë„ ìˆë‹¤.
<button
onCtick={() => setCount((c)=>c%2===0? c: c+1)}
>
Increment Count if it makes the result even

</button>
```

### ì§€ì—° ì´ˆê¸°í™”

- ë³µì¡í•œ ì´ˆê¸° ìƒíƒœ ê³„ì‚°ì— ì‚¬ìš©
- ë¶ˆí•„ìš”í•œ ì¬ê³„ì‚° ë°©ì§€
- ì´ˆê¸° ë¡œë”© ì‹œê°„ ë‹¨ì¶•

> ğŸ’¡ì–´ë–¤ ê²½ìš°ì— ì§€ì—° ì´ˆê¸°í™”ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆì„ê¹Œ?

- ë³µì¡í•œ ë°ì´í„° êµ¬ì¡° ìƒì„±, íŒŒì¼ ì‹œìŠ¤í…œ ì‘ì—…, ë„¤íŠ¸ì›Œí¬ ìš”ì²­, DBì¿¼ë¦¬ ë“±ë“±

> ğŸ’¡ì§€ì—° ì´ˆê¸°í™”ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë©´ ì–´ë–¤ ë‹¨ì ì´ ìˆì„ê¹Œ?

- ë¶ˆí•„ìš”í•œ ì¬ê³„ì‚°:
  - ë¦¬ë Œë”ë§ë  ë•Œë§ˆë‹¤ ë³µì¡í•œ ê³„ì‚°ì´ ë°˜ë³µë¨ -> ì„±ëŠ¥ ì €í•˜
- ì´ˆê¸° ë¡œë”© ì‹œê°„ ì¦ê°€:
  - ì»´í¬ë„ŒíŠ¸ê°€ ì²˜ìŒ ë§ˆìš´íŠ¸ë  ë•Œ ë¬´ê±°ìš´ ì—°ì‚°ì´ ì¦‰ì‹œ ì‹¤í–‰ë¨ -> ì´ˆê¸° ë¡œë”© ì‹œê°„ ì¦ê°€

## useReducer ì‚¬ìš©í•˜ê¸°

### ê¸°ë³¸ ì‚¬ìš©ë²•

- ë³µì¡í•œ ìƒíƒœ ê´€ë¦¬ì— ìœ ìš©
- reducer ë¶„ë¦¬ ê°€ëŠ¥
- ìˆœìˆ˜ í•¨ìˆ˜ë¡œ í…ŒìŠ¤íŠ¸ ìš©ì´

### ë² ì¼ì•„ì›ƒ

- ë™ì¼ state ë°˜í™˜: ë² ì¼ì•„ì›ƒ ë°œìƒ
- ìƒˆ ê°ì²´ ìƒì„±: ë² ì¼ì•„ì›ƒ ì—†ìŒ

### ì›ì‹œê°’

- ìˆ«ì, ë¬¸ìì—´ ë“±ì— ì‘ë™
- ì™¸ë¶€ ë³µì¡ ë¡œì§ ì •ì˜ ê°€ëŠ¥

ê°ì³¬ê°€ ì•„ë‹Œ ê°’, ì¦‰ ìˆ«ìë‚˜ ë¬¸ìì—´ ê°™ì€ ì›ì‹œ ê°’ì— ëŒ€í•´ ì‘ë™í•œë‹¤
useReducer ì— ì›ì‹œê°’ì„ì‚¬ìš©í•˜ëŠ”ê²ƒì€ ì™¸ë¶€ì—ì„œ ë³µì¡í•œ ë¦¬ë“€ì„œ ë¡œì§ì„ ì •ì˜í• ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ìœ ìš©í•˜ë‹¤.

```tsx
const reducer = (count, delta) => { if (delta K0) {

thrownewError('delta cannotbenegative');

}
if (delta >10) {

// ë„ˆë¬´ í¬ë‹¤ë©´ ë¬´ì‹œ

return count

I
if (countK100){

// ë³´ë„ˆìŠ¤ë¥¼ ë”í•œë‹¤

return count + delta + 10

}
return count + delta

}
```

### ì§€ì—° ì´ˆê¸°í™”(init)

- ì„¸ ë²ˆì§¸ ë§¤ê°œë³€ìˆ˜ë¡œ ì´ˆê¸°í™” í•¨ìˆ˜ ì „ë‹¬

```tsx
const [state, dispatch] = useReducer(reducer, 0, init);
```

## useStateì™€ useReducerì˜ ìœ ì‚¬ì ê³¼ ì°¨ì´ì 

Preactì—ì„œ useStateì™€ useReducer
https://github.com/preactjs/preact/blob/b976caa6790bfce77ee4e4621963a8cc5965c537/hooks/src/index.js#L166

Reactì—ì„œ useState
https://github.com/facebook/react/blob/d160aa0fbb1bd2d00ea8c771c551c9cb5b47f1e9/packages/react/src/ReactHooks.js#L93

### useReducerë¥¼ ì´ìš©í•œ useState êµ¬í˜„

- useReducerë¡œ useState êµ¬í˜„ ê°€ëŠ¥

### useStateë¥¼ ì´ìš©í•œ useReducer êµ¬í˜„

- useStateë¡œ useReducer ê±°ì˜ ëŒ€ì²´ ê°€ëŠ¥

### ì´ˆê¸°í™” í•¨ìˆ˜ ì‚¬ìš©í•˜ê¸°

- useReducer: ì™¸ë¶€ì—ì„œ reducer, init ì •ì˜ ê°€ëŠ¥

### ì¸ë¼ì¸ ë¦¬ë“€ì„œ ì‚¬ìš©í•˜ê¸°

- ì¸ë¼ì¸ ë¦¬ë“€ì„œ: ì™¸ë¶€ ë³€ìˆ˜ ì˜ì¡´ ê°€ëŠ¥, ì˜ ì•ˆ ì”€

```tsx
const useScore = (bonus) =>
  useReducer((prev, delta) => prey + delta + bonus, 0);
```
